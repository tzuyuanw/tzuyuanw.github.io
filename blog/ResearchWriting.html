<!DOCTYPE html>
	<html>
		<head>
			<meta charset="utf-8">
			<title>Writing Sample</title>
			<!-- link to main stylesheet -->
			<link rel="stylesheet" href="css/blogMain.css" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"  integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"/>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
		</head>
		<body>
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb">
				  <li class="breadcrumb-item"><a class="link-secondary text-decoration-none" href="/"><b>Home</b></a></li>
                  <li class="breadcrumb-item"><a class="link-secondary text-decoration-none" href="/blog"><b>Portfolio</b></a></li>
				  <li class="breadcrumb-item active" aria-current="page">Estimating Stop Level Transit Ridership</li>
				</ol>
			</nav>
			<div class="container">
				<p class="fs-1">Estimating Stop Level Transit Ridership</p>
				<p>As a research assistant, I had the opportunity to work with disaggregated ridership data from 
                    the Southeast Pennsylvania Transportation Authority (SEPTA). 
                    This agency operates bus, trolley, subway, and regional rail services in Philadelphia and its surrounding counties. 
                    This document explains the process of estimating daily ridership at the stop level using transit schedule and 
                    a sample of ridership data from the automated passenger counter (APC). 
				</p>
                <br>

				<h3>Background</h3>
				<p>To understand the changes in ridership during the pandemic, ridership numbers at individual stop is needed. 
                    The best disaggregated data available that provides location information was the data from 
                    the automated passenger counter (APC). This technology is fitted by the doors of a transit vehicle and 
                    counts the number of boarding and alighting at each stop. 
                    However, for SEPTA this system is not available on every vehicle in operation, 
                    which requires steps to be taken to estimate the total ridership. This document explains the process used to 
                    estimate total daily ridership at the stop level using a sample of ridership data from APC and the service schedule.
				</p>
                <br>

                <h3>Data Sources</h3>
				<p>Two main types of data were used for this estimation. They include transit schedule and ridership data. 
				</p>

				<p><b>Transit Schedule Data</b><br/>
					This calculation uses publically available transit schedule. 
                    This data is in the format of Generalized Transit Feed Specification (GTFS), 
                    which is a standardized transit schedule format. It contains information such as scheduled trips, 
                    the stops they make, and the time of their scheduled arrival. To create an accurate transit schedule, 
                    twelve different data files were used to create the service schedule that covers the 140-day period 
                    of the analysis. 
				</p>
				
				<p><b>Ridership Data</b><br/>
					The ridership data provided was disaggregated at the stop level for each day. 
                    They came from two different systems, since SEPTA has two APC data vendors, 
                    each supports a portion of the fleet. 
                    Even though these two sources contain different amount of information for each entry, 
                    they were able to be combined using similar fields such as date and a unique stop identifier (stop_id). 
                    Unfortunately, not every bus in the fleet has the APC technology, 
                    which means the ridership data represents only a sample of the total ridership. 
			
				</p>
                <br>

                <h3>Calculation Process</h3>
				<p>Prior to estimating the ridership, both data have to be processed. 
                    The transit schedule data was used to create a dataset that contain the scheduled number of trips that 
                    arrives at a stop for a given day (Number of scheduled trips). 
                    The APC data was used to create a dataset that contains the number of times ridership was recorded at a stop 
                    for a given day (Number of APC sampled trips). Once these are calculated for each stop each day, 
                    the number of APC sampled trips was divided by the number of scheduled trips. 
                    This ratio describes the share of scheduled trips that were sampled by APC at a stop for a given day. 
                    To estimate the ridership, boarding for an individual stop per day is divided by this ratio. 
                    This estimation process scales the ridership data by the share of total scheduled trips it represented. 
				</p>
                <p><br></p>

                <div class="text-center">
                    <img src="ResearchWritingFormula.png" height="100%" width="70%" alt="test image" class="image"/>
                    <p class="fw-lighter">
                        Formula for calculating estimated daily boarding at each stop
                    </p>
                </div>
                <p><br></p>

                <p>For cases where the ratio is greater than one (Number of APC sampled trips > Number of scheduled trips), 
                    the ratio is manually set to one. 
                    In these cases, more trips were registered by APC than there were scheduled. 
                    Since these trips occurred and contain ridership numbers, they were included in the estimation. 
                </p>
                <br>
                
                <h3>Conclusion and Limitation</h3>
				<p>This process estimates the daily ridership at the stop level using partial APC data and GTFS transit schedule data. 
                    Even though the calculation is simple, this process carries assumptions. 
                    This calculation method assumes every scheduled service was operated. 
                    This is most likely not the case. During the pandemic, 
                    SEPTA experienced staffing challenges and has allowed trips to be missed. 
                    This likely lead to a higher estimated ridership. 
                    To resolve this limitation requires accurate data on the missed trips that can work with GTFS schedules. 
                    Additionally, the APC data itself is imperfect. 
                    Since the system attempts to match recorded trip times and location with scheduled trips, 
                    this process is not perfect. Within the data, 
                    there are entries with boarding and alighting but no trips or stops attributed to the entries. 
                    This likely led to an underestimate of ridership, 
                    as recorded boarding would not be included in the ridership of any stops. 
                    This is a challenge inherent in the data and its collection method. 
                    Even though this process has its limitations, 
                    it provides a method to estimate ridership when no complete data is available. 
				</p>
                <br>
                <br>
                <br>
                <br>
			</div>
			<div class="footer">
				<footer>
					<ul>
						<li><a class="link-secondary text-decoration-none" href="mailto:tzuyuan@alumni.upenn.edu">tzuyuan@alumni.upenn.edu</a></li>
						<li><a class="link-secondary text-decoration-none" href="https://github.com/tzuyuanw">github.com/tzuyuanw</a></li>
					</ul>
				</footer>
			</div>
		</body>
	</html>
